(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"10cf":function(t,e,i){},6230:function(t,e,i){"use strict";i("10cf")},"7aff":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.bluePrintData?i("q-page",{staticClass:"documentDisplay",class:{"q-pb-xl q-pl-xl q-pr-xl":t.disableDocumentControlBar,"q-pa-xl":!t.disableDocumentControlBar,hiddenFields:t.hideEmptyFields||t.retrieveFieldValue(t.currentData,"finishedSwitch")}},[i("deleteDocumentCheckDialog",{attrs:{"dialog-trigger":t.deleteObjectDialogTrigger},on:{"trigger-dialog-close":t.deleteObjectDialogClose}}),i("div",{staticClass:"row justify-start q-col-gutter-x-xl"},[t.disableDocumentControlBar?i("div",{staticClass:"flex justify-end localControlRow"},[t.editMode?i("q-btn",{staticClass:"q-mr-md",attrs:{icon:"mdi-content-save-edit",color:t.hasEdits?"teal-14":"primary",outline:t.isDarkMode},on:{click:function(e){return t.saveCurrentDocument(!0)}}},[i("q-tooltip",{attrs:{delay:500,anchor:"bottom left",self:"top middle"}},[t._v("\n           Save document without exiting edit mode\n          ")])],1):t._e(),t.editMode?i("q-btn",{staticClass:"q-mr-md",attrs:{color:t.hasEdits?"teal-14":"primary",icon:"mdi-content-save",outline:t.isDarkMode},on:{click:function(e){return t.saveCurrentDocument(!1)}}},[i("q-tooltip",{attrs:{delay:500,anchor:"bottom middle",self:"top middle"}},[t._v("\n          Save current document\n        ")])],1):t._e(),t.editMode?t._e():i("q-btn",{staticClass:"q-mr-md",attrs:{color:"primary",icon:"mdi-file-document-edit",outline:t.isDarkMode},on:{click:t.toggleEditMode}},[i("q-tooltip",{attrs:{delay:500,anchor:"bottom middle",self:"top middle"}},[t._v("\n          Edit current document\n        ")])],1),t.currentData.isNew?t._e():i("q-btn",{staticClass:"q-mr-md",attrs:{icon:"mdi-file-search-outline",color:"primary",outline:t.isDarkMode},on:{click:t.openThisDocumentInSidebar}},[i("q-tooltip",{attrs:{delay:500,"max-width":"500px",anchor:"bottom middle",self:"top middle"}},[t._v("\n            Preview document in split-view mode\n          ")])],1),t.currentData.isNew?t._e():i("q-btn",{staticClass:"q-mr-md",attrs:{color:"primary",icon:"mdi-file-tree",outline:t.isDarkMode},on:{click:t.addNewUnderParent}},[i("q-tooltip",{attrs:{delay:500,anchor:"bottom middle",self:"top middle"}},[t._v("\n          Add a new document with the currently opened one as the parent\n        ")])],1),t.currentData.isNew?t._e():i("q-btn",{staticClass:"q-mr-md",attrs:{color:"primary",icon:"mdi-content-copy",outline:t.isDarkMode},on:{click:t.copyTargetDocument}},[i("q-tooltip",{attrs:{delay:500,anchor:"bottom middle",self:"top middle"}},[t._v("\n          Copy current document\n        ")])],1),i("q-separator",{staticClass:"q-mr-md",attrs:{vertical:"",inset:"",color:t.isDarkMode?"accent":"black"}}),t.currentData.isNew?t._e():i("q-btn",{staticClass:"q-mr-md",attrs:{color:t.hasEdits?"secondary":"primary",icon:"mdi-database-export-outline",outline:t.isDarkMode},on:{click:t.triggerExport}},[i("q-tooltip",{attrs:{delay:500,anchor:"bottom middle",self:"top middle"}},[t._v("\n          Export current project\n          "),t.hasEdits?i("span",{staticClass:"text-secondary"},[i("br"),i("br"),t._v("\n            Document has active edits.\n            "),i("br"),t._v("\n            These will not be exported.\n            "),i("br"),t._v("\n            Please save first.\n          ")]):t._e()])],1),i("q-separator",{staticClass:"q-mr-md",attrs:{vertical:"",inset:"",color:t.isDarkMode?"accent":"black"}}),t.currentData.isNew?t._e():i("q-btn",{attrs:{color:"secondary",icon:"mdi-text-box-remove-outline",outline:t.isDarkMode},on:{click:t.deleteObjectAssignUID}},[i("q-tooltip",{attrs:{delay:500,anchor:"bottom left",self:"top middle"}},[t._v("\n          Delete current document\n        ")])],1)],1):t._e(),t.showDocumentID?i("div",{staticClass:"col-12 q-mt-xl justify-end"},[i("q-input",{ref:"idCopy",staticStyle:{width:"375px"},attrs:{readonly:"",outlined:"",label:"Document ID","stack-label":""},on:{click:t.copyID},model:{value:t.currentData._id,callback:function(e){t.$set(t.currentData,"_id",e)},expression:"currentData._id"}})],1):t._e(),t._l(t.bluePrintData.extraFields,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:("break"!==t.retrieveFieldType(t.currentData,e.id)||!t.hideDocumentTitles)&&(t.hasValueFieldFilter(e)||t.editMode)&&(t.checkBreakSectionValues(e)||t.editMode)&&t.checkForLegacyFieldValue(t.currentData,e)&&t.checkDocumentTemplate(e.id),expression:"\n        (retrieveFieldType(currentData, field.id) !== 'break' || !hideDocumentTitles) &&\n        (\n          (hasValueFieldFilter(field) || editMode)\n          && (checkBreakSectionValues(field) || editMode)\n          && checkForLegacyFieldValue(currentData, field)\n          && checkDocumentTemplate(field.id)\n        )\n        "}],key:""+e.id,class:"\n        col-12\n        col-md-"+t.determineSize_MD(e)+"\n        col-lg-"+t.determineSize_LG(e)+"\n        col-xl-"+t.determineSize_XL(e)+"\n        q-mb-md\n        documentColumnWrapper\n        "+(t.determineLegacyField(t.currentData,e.id)?"isLegacy":"")+"\n      "},["break"===e.type&&t.categoryFieldFilter(e.id)?i("Field_Break",{staticClass:"inputWrapper break",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id)}}):t._e(),"text"===e.type&&t.categoryFieldFilter(e.id)?i("Field_Text",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id),isNew:t.currentData.isNew,editMode:t.editMode},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}):t._e(),"number"===e.type&&t.categoryFieldFilter(e.id)?i("Field_Number",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id),isNew:t.currentData.isNew,editMode:t.editMode},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}):t._e(),"switch"===e.type&&t.categoryFieldFilter(e.id)?i("Field_Switch",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id),isNew:t.currentData.isNew,editMode:t.editMode},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}):t._e(),"colorPicker"===e.type&&t.categoryFieldFilter(e.id)?i("Field_ColorPicker",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id),isNew:t.currentData.isNew,editMode:t.editMode},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}):t._e(),"list"===e.type&&t.categoryFieldFilter(e.id)?i("Field_List",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id),isNew:t.currentData.isNew,editMode:t.editMode},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}):t._e(),"singleSelect"===e.type&&t.categoryFieldFilter(e.id)?i("Field_SingleSelect",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id),isNew:t.currentData.isNew,editMode:t.editMode},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}):t._e(),"multiSelect"===e.type&&t.categoryFieldFilter(e.id)?i("Field_MultiSelect",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id),isNew:t.currentData.isNew,editMode:t.editMode},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}):t._e(),"singleToNoneRelationship"!==e.type&&"singleToSingleRelationship"!==e.type&&"singleToManyRelationship"!==e.type||!t.categoryFieldFilter(e.id)?t._e():i("Field_SingleRelationship",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id),isNew:t.currentData.isNew,editMode:t.editMode,"current-id":t.currentData._id},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}),"manyToNoneRelationship"!==e.type&&"manyToSingleRelationship"!==e.type&&"manyToManyRelationship"!==e.type||!t.categoryFieldFilter(e.id)?t._e():i("Field_MultiRelationship",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id),isNew:t.currentData.isNew,editMode:t.editMode,"current-id":t.currentData._id},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}),"wysiwyg"===e.type&&t.categoryFieldFilter(e.id)?i("Field_Wysiwyg",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id)?t.retrieveFieldValue(t.currentData,e.id):"",isNew:t.currentData.isNew,editMode:t.editMode,"current-id":t.currentData._id},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}):t._e(),"tags"===e.type&&t.categoryFieldFilter(e.id)?i("Field_Tags",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id),isNew:t.currentData.isNew,editMode:t.editMode},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}):t._e(),"documentTemplate"===e.type?i("Field_DocumentTemplate",{staticClass:"inputWrapper",attrs:{inputDataBluePrint:e,inputDataValue:t.retrieveFieldValue(t.currentData,e.id),isNew:t.currentData.isNew,editMode:t.editMode},on:{"signal-input":function(i){return t.reactToFieldUpdate(i,e)}}}):t._e()],1)}))],2)],1):t._e()},n=[],r=i("60a3"),s=i("f987"),o=i("11ec"),c=i("2a2b"),l=i("3f4b"),d=i("d263"),u=i("ad31"),p=i("a0b3"),h=i("212e"),m=i("0ce9"),D=i("1edc"),y=i("a6fe"),f=i("fd75"),b=i("9083"),g=i("bffe"),v=i("fa9a"),F=i("773e"),_=i("abaf"),T=i("ceb3"),S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"documentLabelWrapper text-weight-bolder q-mb-sm q-mt-md"},[t.inputIcon?i("q-icon",{staticClass:"documentLabelIcon",attrs:{name:t.inputIcon,size:t.inputIcon.includes("fas")||t.inputIcon.includes("fab")?"15px":"20px"}}):t._e(),i("div",{staticClass:"documentLabelContent"},[t._v("\n    "+t._s(t.inputDataBluePrint.name)+"\n  ")]),t.toolTip&&!t.disableDocumentToolTips?i("q-icon",{staticClass:"documentLabelTooltip",attrs:{name:"mdi-help-circle",size:"16px"}},[i("q-tooltip",{attrs:{delay:500}},[i("span",{domProps:{innerHTML:t._s(t.toolTip)}})])],1):t._e()],1),t.editMode?t._e():i("q-list",{staticClass:"fieldSingleSelect_list",attrs:{dense:""}},[i("q-item",[i("q-item-section",{staticClass:"text-weight-medium"},[t._v("\n         "+t._s(t.selectedTemplate&&t.selectedTemplate.name?t.selectedTemplate.name:"")+"\n      ")])],1)],1),t.editMode?i("q-select",{staticClass:"singleSelect",staticStyle:{width:"100%"},attrs:{dense:"",dark:"","popup-content-class":"menuResizer","menu-anchor":"bottom middle","menu-self":"top middle",options:t.extraInput,"option-value":"id","use-input":"",outlined:!t.isDarkMode,filled:t.isDarkMode},on:{filter:t.filterFn,input:t.signalInput},scopedSlots:t._u([{key:"selected-item",fn:function(e){return[t._v("\n        "+t._s(e.opt.name)+"\n    ")]}},{key:"option",fn:function(e){var a=e.itemProps,n=e.itemEvents,r=e.opt;return[i("q-item",t._g(t._b({key:r.id},"q-item",a,!1),n),[i("q-item-section",[i("q-item-label",[t._v("\n            "+t._s(r.name)+"\n          ")])],1)],1)]}}],null,!1,2468093591),model:{value:t.selectedTemplate,callback:function(e){t.selectedTemplate=e},expression:"selectedTemplate"}}):t._e(),i("div",{staticClass:"separatorWrapper"},[i("q-separator",{attrs:{color:"grey q-mt-md"}})],1)],1)},w=[],C=i("91d2"),x=function(t,e,i,a){var n,r=arguments.length,s=r<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},O=function(t,e,i,a){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,r){function s(t){try{c(a.next(t))}catch(e){r(e)}}function o(t){try{c(a["throw"](t))}catch(e){r(e)}}function c(t){t.done?i(t.value):n(t.value).then(s,o)}c((a=a.apply(t,e||[])).next())}))};let E=class extends C["a"]{constructor(){super(...arguments),this.localInput=null,this.documentTemplateList=[],this.selectedTemplate=null,this.extraInput=[]}reactToInputChanges(){this.localInput=this.inputDataValue?this.inputDataValue:null,this.assignLocalInputData()}populateExtraInput(){return O(this,void 0,void 0,(function*(){yield this.loadDocumentTemplates(),this.documentTemplateList&&(this.extraInput=Object(o["a"])(!0,[],this.documentTemplateList)),this.assignLocalInputData()}))}loadDocumentTemplates(){return O(this,void 0,void 0,(function*(){this.documentTemplateList=yield Object(u["a"])()}))}assignLocalInputData(){if(this.documentTemplateList.length>0&&this.localInput){const t=this.documentTemplateList.find((t=>t.id===this.localInput));t&&(this.selectedTemplate=t)}}filterFn(t,e){e(""!==t?()=>{var e;if(null===(e=this.inputDataBluePrint)||void 0===e?void 0:e.predefinedSelectValues){const e=t.toLowerCase();this.extraInput=this.documentTemplateList.filter((t=>t.name.toLowerCase().indexOf(e)>-1))}}:()=>{this.documentTemplateList&&(this.extraInput=this.documentTemplateList)})}signalInput(){return this.selectedTemplate?this.selectedTemplate.id:null}};x([Object(r["c"])({default:""})],E.prototype,"inputDataValue",void 0),x([Object(r["e"])("inputDataValue",{deep:!0,immediate:!0})],E.prototype,"reactToInputChanges",null),x([Object(r["e"])("inputDataBluePrint",{deep:!0,immediate:!0})],E.prototype,"populateExtraInput",null),x([Object(r["b"])()],E.prototype,"signalInput",null),E=x([Object(r["a"])({components:{}})],E);var k=E,M=k,q=(i("a82c"),i("2877")),j=i("0016"),I=i("05c0"),P=i("1c1c"),N=i("66e5"),V=i("4074"),L=i("ddd8"),A=i("0170"),B=i("eb85"),R=i("eebe"),$=i.n(R),U=Object(q["a"])(M,S,w,!1,null,null,null),G=U.exports;$()(U,"components",{QIcon:j["a"],QTooltip:I["a"],QList:P["a"],QItem:N["a"],QItemSection:V["a"],QSelect:L["a"],QItemLabel:A["a"],QSeparator:B["a"]});var Q=i("e3e6"),W=function(t,e,i,a){var n,r=arguments.length,s=r<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,i):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},z=function(t,e,i,a){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,r){function s(t){try{c(a.next(t))}catch(e){r(e)}}function o(t){try{c(a["throw"](t))}catch(e){r(e)}}function c(t){t.done?i(t.value):n(t.value).then(s,o)}c((a=a.apply(t,e||[])).next())}))};let H=class extends s["a"]{constructor(){super(...arguments),this.hideDocumentTitles=!1,this.showDocumentID=!1,this.preventAutoScroll=!1,this.disableDocumentControlBar=!1,this.isDarkMode=!1,this.hideEmptyFields=!1,this.bluePrintData=!1,this.hasEdits=!1,this.editMode=!1,this.currentData=!1,this.localDataCopy=!1,this.documentTemplateList=[],this.decounceScrollTimer=!1,this.deleteObjectDialogTrigger=!1,this.documentPass=null}onSettingsChange(){const t=this.SGET_options;this.disableDocumentControlBar=t.disableDocumentControlBar,this.isDarkMode=t.darkMode,this.hideEmptyFields=t.hideEmptyFields,this.hideDocumentTitles=t.hideDocumentTitles,this.preventAutoScroll=t.preventAutoScroll,this.showDocumentID=t.showDocumentID}onUrlChange(){return z(this,void 0,void 0,(function*(){this.documentTemplateList=yield Object(u["a"])(),yield this.sleep(50);const t=this.findRequestedOrActiveDocument();window.scrollTo({top:0,behavior:"auto"}),this.reloadLocalContent();const e=t.scrollDistance&&!this.preventAutoScroll?t.scrollDistance:0;window.scrollTo({top:e,behavior:"auto"})}))}watchPageScroll(){this.preventAutoScroll||(this.decounceScrollTimer&&window.clearTimeout(this.decounceScrollTimer),this.decounceScrollTimer=window.setTimeout((()=>{const t=window.scrollY,e=Object(o["a"])(!0,{},this.findRequestedOrActiveDocument());e.scrollDistance=t;const i={doc:e,treeAction:!1};this.SSET_updateOpenedDocument(i)}),200))}checkHasEdits(){const t=this.findRequestedOrActiveDocument();t&&t.hasEdits?this.hasEdits=!0:this.hasEdits=!1}onDocChange(){return z(this,void 0,void 0,(function*(){this.checkHasEdits(),yield this.sleep(100);const t=this.findRequestedOrActiveDocument();t&&t._id===this.currentData._id&&!t.hasEdits&&this.reloadLocalContent()}))}reloadLocalContent(){var t;this.bluePrintData=this.retrieveDocumentBlueprint();let e=!1;if(this.SGET_document(this.$route.params.id)&&(e=this.SGET_document(this.$route.params.id)),this.SGET_openedDocument(this.$route.params.id)&&(e=this.SGET_openedDocument(this.$route.params.id)),this.currentData=e?Object(o["a"])(!0,[],e):this.createNewDocumentObject(),!this.currentData)return void this.$router.push({path:"/project"}).catch((t=>{t&&"NavigationDuplicated"!==t.name&&console.log(t)}));const i=this.mapNewObjectFields();if(!i)return;if(this.currentData.extraFields=i,this.currentData.editMode?this.editMode=!0:this.editMode=!1,null===(t=this.$route.query)||void 0===t?void 0:t.editMode){this.editMode=!0,this.currentData.editMode=!0;const t=Object.assign({},this.$route.query);delete t.editMode,this.$router.replace({query:t}).catch((t=>console.log(t)))}const a=Object(o["a"])(!0,{},this.currentData),n={doc:a,treeAction:!1};this.SSET_addOpenedDocument(n),this.currentData.isNew||Object(Q["h"])(this.currentData._id).catch((t=>console.log(t)))}reactToFieldUpdate(t,e){if("text"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!1};this.SSET_updateOpenedDocument(a)}if("number"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!1};this.SSET_updateOpenedDocument(a)}if("switch"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!1};if(this.SSET_updateOpenedDocument(a),"categorySwitch"===e.id){const t=Object(o["a"])(!0,{},this.bluePrintData),e=Object(o["a"])(!0,{},this.bluePrintData);e.extraFields=[],this.SSET_blueprint(e),this.retrieveDocumentBlueprint(),this.SSET_blueprint(t),this.retrieveDocumentBlueprint()}}if("colorPicker"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!1};this.SSET_updateOpenedDocument(a)}if("list"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!1};this.SSET_updateOpenedDocument(a)}if("singleSelect"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!1};this.SSET_updateOpenedDocument(a)}if("multiSelect"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!1};this.SSET_updateOpenedDocument(a)}if("singleToNoneRelationship"===e.type||"singleToManyRelationship"===e.type||"singleToSingleRelationship"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!1};this.SSET_updateOpenedDocument(a)}if("manyToNoneRelationship"===e.type||"manyToSingleRelationship"===e.type||"manyToManyRelationship"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!1};t.isSilent&&(a.doc.hasEdits=!1),this.SSET_updateOpenedDocument(a)}if("wysiwyg"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!1};this.SSET_updateOpenedDocument(a)}if("tags"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!1};this.SSET_updateOpenedDocument(a)}if("documentTemplate"===e.type){this.currentData.hasEdits=!0;const i=this.currentData.extraFields.findIndex((t=>t.id===e.id));this.currentData.extraFields[i].value=t,this.localDataCopy=Object(o["a"])(!0,{},this.currentData);const a={doc:this.localDataCopy,treeAction:!0};this.SSET_updateOpenedDocument(a)}}retrieveDocumentBlueprint(){return this.bluePrintData=this.SGET_blueprint(this.$route.params.type),this.SGET_blueprint(this.$route.params.type)}mapNewObjectFields(){var t,e;const i=this.currentData&&this.currentData.extraFields?this.currentData.extraFields:[],a=this.retrieveDocumentBlueprint();if(!a)return!1;for(const r of a.extraFields){const a=i.find((t=>t.id===r.id));if(!a)if("name"===r.id)i.push({id:"name",value:`New ${this.bluePrintData.nameSingular.toLowerCase()}`});else if("parentDoc"===r.id)if(null===(t=this.$route.query)||void 0===t?void 0:t.parent){const t=this.$route.query.parent;let e=!1;try{e=this.SGET_document(t)}catch(n){}i.push({id:"parentDoc",value:{value:{_id:e._id,value:e._id,type:this.bluePrintData._id,disable:!1,url:e.url,label:this.retrieveFieldValue(e,"name"),pairedField:""},addedValues:{pairedId:"",value:""}}})}else i.push({id:r.id,value:""});else if("tags"===r.id)if(null===(e=this.$route.query)||void 0===e?void 0:e.tag){const t=this.$route.query.tag;i.push({id:"tags",value:[t]})}else i.push({id:r.id,value:""});else i.push({id:r.id,value:""})}return i}createNewDocumentObject(){if(this.editMode=!0,!this.$route.params.id||!this.bluePrintData)return!1;const t=this.$route.params.id;return{_id:t,type:this.bluePrintData._id,icon:this.bluePrintData.icon,editMode:!0,isNew:!0,isFinished:!1,hasEdits:!1,url:`/project/display-content/${this.bluePrintData._id}/${t}`,extraFields:[]}}categoryFieldFilter(t){const e=this.retrieveFieldValue(this.currentData,"categorySwitch"),i=["breakDocumentSettings","name","documentColor","documentBackgroundColor","parentDoc","order","categorySwitch","minorSwitch","deadSwitch","finishedSwitch","tags","otherNames","docTemplate"];return!e&&"categoryDescription"!==t||i.includes(t)||e&&"categoryDescription"===t}checkBreakSectionValues(t){if("break"!==t.type)return!0;const e=this.bluePrintData.extraFields.length;let i=this.bluePrintData.extraFields.findIndex((e=>e.id===t.id)),a=this.bluePrintData.extraFields[i+1];while("break"!==a.type||i+1===e){if(a=this.bluePrintData.extraFields[i+1],!a||"break"===a.type)return!1;const t=this.hasValueFieldFilter(a);if(t)return!0;i++}return!1}checkForLegacyFieldValue(t,e){const i=this.determineLegacyField(t,e.id);if(!i)return!0;const a=this.retrieveFieldValue(this.currentData,e.id);let n=!0;return(!a||"string"===typeof a&&0===a.length||"string"===typeof a.value&&0===a.value.length||Array.isArray(a)&&0===a.length||a.value&&0===a.value.length||null===a.value)&&(n=!1),!(!i||!n)}hasValueFieldFilter(t){var e;if("break"===this.retrieveFieldType(this.currentData,t.id))return!0;if(!this.hideEmptyFields&&!this.retrieveFieldValue(this.currentData,"finishedSwitch"))return!0;const i=this.retrieveFieldValue(this.currentData,t.id);return!(!i||Array.isArray(i)&&0===i.length||0===(null===(e=null===i||void 0===i?void 0:i.value)||void 0===e?void 0:e.length)||null===i.value)}determineSize_MD(t){return"break"===t.type?12:t.sizing<=6?6:t.sizing}determineSize_LG(t){return"break"===t.type?12:t.sizing<=4?4:t.sizing}determineSize_XL(t){return"break"===t.type?12:t.sizing}deleteObjectDialogClose(){this.deleteObjectDialogTrigger=!1}deleteObjectAssignUID(){this.deleteObjectDialogTrigger=this.generateUID()}addNewUnderParent(){const t=this.findRequestedOrActiveDocument();if(t){const e={_id:t.type,parent:t._id};this.addNewObjectRoute(e)}}copyTargetDocument(){this.documentPass=Object(o["a"])(!0,{},this.findRequestedOrActiveDocument());const t=this.SGET_blueprint(this.documentPass.type),e=Object(c["a"])(this.documentPass,this.generateUID(),t),i={doc:e,treeAction:!1};this.SSET_addOpenedDocument(i),this.$router.push({path:e.url}).catch((t=>{const e=t.name;"NavigationDuplicated"!==e&&console.log(t)}))}toggleEditMode(){const t=this.findRequestedOrActiveDocument();if(t&&!t.editMode){const e=Object(o["a"])(!0,{},t);e.editMode=!0;const i={doc:e,treeAction:!1};this.SSET_updateOpenedDocument(i)}}saveCurrentDocument(t){return z(this,void 0,void 0,(function*(){document.activeElement&&!1===t&&document.activeElement.blur();const e=this.findRequestedOrActiveDocument(),i=e.isNew,a=this.SGET_allOpenedDocuments,n=Object(o["a"])(!0,[],a.docs);if(e){const a=Object(o["a"])(!0,[],e),r=yield Object(l["b"])(a,n,this.SGET_allDocuments.docs,t,this),s={doc:r.documentCopy,treeAction:!0};this.SSET_updateOpenedDocument(s),i?this.SSET_addDocument({doc:this.mapShortDocument(r.documentCopy,this.SGET_allDocumentsByType(r.documentCopy.type).docs)}):this.SSET_updateDocument({doc:this.mapShortDocument(r.documentCopy,this.SGET_allDocumentsByType(r.documentCopy.type).docs)});for(const t of r.allOpenedDocuments){const e={doc:t,treeAction:!0};this.SSET_updateOpenedDocument(e),this.SSET_updateDocument({doc:this.mapShortDocument(t,this.SGET_allDocumentsByType(t.type).docs)})}this.$q.notify({group:!1,type:"positive",message:"Document successfully saved"})}}))}openThisDocumentInSidebar(){const t=this.findRequestedOrActiveDocument();this.openDocumentPreviewPanel(t._id)}copyID(){const t=this.$refs.idCopy;t.select(),document.execCommand("copy"),this.$q.notify({group:!1,type:"positive",message:"Document ID Copied"})}triggerExport(){const t=this.currentData._id;this.SSET_setExportDialogState([t])}checkDocumentTemplate(t){const e=["breakDocumentSettings","name","documentColor","documentBackgroundColor","parentDoc","order","categorySwitch","minorSwitch","deadSwitch","finishedSwitch","tags","docTemplate"];if(e.includes(t))return!0;const i=this.retrieveFieldValue(this.currentData,"docTemplate");if(!i)return!0;const a=this.documentTemplateList.find((t=>t.id===i));if(!a)return!0;const n=a.documentTypeList.find((t=>t.documentTypeID===this.bluePrintData._id));return!n||!n.excludedFieldIDList.includes(t)}};W([Object(r["e"])("SGET_options",{immediate:!0,deep:!0})],H.prototype,"onSettingsChange",null),W([Object(r["e"])("$route",{immediate:!0,deep:!0})],H.prototype,"onUrlChange",null),W([Object(r["e"])("SGET_allOpenedDocuments",{deep:!0})],H.prototype,"onDocChange",null),H=W([Object(r["a"])({components:{Field_Break:p["a"],Field_Text:h["a"],Field_Number:m["a"],Field_Switch:D["a"],Field_ColorPicker:y["a"],Field_List:f["a"],Field_SingleSelect:b["a"],Field_MultiSelect:g["a"],Field_SingleRelationship:v["default"],Field_MultiRelationship:F["default"],Field_Wysiwyg:_["a"],Field_Tags:T["a"],Field_DocumentTemplate:G,deleteDocumentCheckDialog:d["a"]}})],H);var J=H,X=J,Y=(i("6230"),i("85f2"),i("9989")),K=i("9c40"),Z=i("27f9"),tt=i("8572"),et=i("b047"),it=Object(q["a"])(X,a,n,!1,null,"21e78d29",null);e["default"]=it.exports;$()(it,"components",{QPage:Y["a"],QBtn:K["a"],QTooltip:I["a"],QSeparator:B["a"],QInput:Z["a"],QField:tt["a"],QList:P["a"],QItem:N["a"],QIcon:j["a"],QChip:et["a"]})},"85f2":function(t,e,i){"use strict";i("d5cb")},"91c0":function(t,e,i){},a82c:function(t,e,i){"use strict";i("91c0")},d5cb:function(t,e,i){}}]);