(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"0682":function(t,e,i){},1458:function(t,e,i){"use strict";i("bbb7")},"1b02":function(t,e,i){"use strict";i("0682")},5141:function(t,e,i){"use strict";i("9fa1")},"773e":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"documentLabelWrapper text-weight-bolder q-mb-sm q-mt-md"},[t.inputIcon?i("q-icon",{staticClass:"documentLabelIcon",attrs:{name:t.inputIcon,size:t.inputIcon.includes("fas")||t.inputIcon.includes("fab")?"15px":"20px"}}):t._e(),i("div",{staticClass:"documentLabelContent"},[t._v("\n      "+t._s(t.inputDataBluePrint.name)+"\n    ")]),t.toolTip&&!t.disableDocumentToolTips?i("q-icon",{staticClass:"documentLabelTooltip",attrs:{name:"mdi-help-circle",size:"16px"}},[i("q-tooltip",{attrs:{delay:500}},[i("span",{domProps:{innerHTML:t._s(t.toolTip)}})])],1):t._e(),t.isOneWayRelationship?i("q-icon",{staticClass:"documentLabelExtra",attrs:{name:"mdi-arrow-right-bold",size:"17px",color:"amber-14"}},[t.disableDocumentToolTips?t._e():i("q-tooltip",{attrs:{delay:500}},[t._v("\n          This is a one-way relationship. "),i("br"),t._v(" Editing this value "),i("span",{staticClass:"text-secondary"},[t._v("WILL NOT")]),t._v(" have any effect on the connected document/s.\n          "),i("br"),i("br"),t._v("\n          Left-clicking the linked document in non-edit mode will open it in new tab and focuses on it.\n          "),i("br"),t._v("\n          Middle-clicking the linked document in non-edit mode will open it in new tab and not focus on it.\n      ")])],1):t._e(),t.isOneWayRelationship?t._e():i("q-icon",{staticClass:"documentLabelExtra",attrs:{name:"mdi-arrow-left-right-bold",size:"17px",color:"teal-14"}},[t.disableDocumentToolTips?t._e():i("q-tooltip",{attrs:{delay:500}},[t._v("\n          This is a two-way relationship. "),i("br"),t._v(" Editing this value "),i("span",{staticClass:"text-secondary"},[t._v("WILL")]),t._v(" also affect the connected document/s.\n          "),i("br"),i("br"),t._v("\n          Left-clicking the linked document in non-edit mode will open it in new tab and focuses on it.\n          "),i("br"),t._v("\n          Middle-clicking the linked document in non-edit mode will open it in new tab and not focus on it.\n      ")])],1)],1),!t.editMode&&t.localInput?i("q-list",{staticClass:"connectionList",attrs:{dense:""}},t._l(t.localInput,(function(e){return i("div",{key:e._id,staticClass:"relationsViewList"},[i("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"relationshipOpeningButton q-btn q-btn-item non-selectable no-outline q-btn--flat q-btn--round text-primary q-btn--actionable q-focusable q-hoverable q-btn--wrap q-btn--dense",on:{click:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])?null:(i.stopPropagation(),i.preventDefault(),"button"in i&&0!==i.button?null:t.openNewTab(e))}}},[i("span",{staticClass:"q-focus-helper"}),i("i",{staticClass:"mdi mdi-open-in-new q-icon notranslate  text-primary",staticStyle:{"font-size":"20px"}}),i("q-tooltip",{attrs:{delay:500}},[t._v("\n          Open in new tab without leaving this one\n        ")])],1),t.recursive||t.sideDocumentPreview?i("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"relationshipChangeParent q-btn q-btn-item non-selectable no-outline q-btn--flat q-btn--round text-primary q-btn--actionable q-focusable q-hoverable q-btn--wrap q-btn--dense",on:{click:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])?null:(i.stopPropagation(),i.preventDefault(),"button"in i&&0!==i.button?null:t.setNewParentId(e._id))}}},[i("span",{staticClass:"q-focus-helper"}),i("i",{staticClass:"mdi mdi-eye-outline q-icon notranslate  text-primary",staticStyle:{"font-size":"20px"}}),i("q-tooltip",{attrs:{delay:500}},[t._v("\n        Change preview to this document\n        ")])],1):t._e(),i("q-item",{staticClass:"text-primary",class:{hasSetParentButton:t.recursive},attrs:{clickable:""},on:{mouseleave:t.setDocumentPreviewClose}},[t.recursive||t.preventPreviewsDocuments?t._e():i("documentPreview",{attrs:{"document-id":e._id,"external-close-trigger":t.documentPreviewClose}}),i("q-item-section",{on:{click:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])?null:(i.stopPropagation(),i.preventDefault(),"button"in i&&0!==i.button?null:t.openExistingDocumentRoute(e))},mouseup:function(i){return i.stopPropagation(),i.preventDefault(),"button"in i&&1!==i.button?null:t.openNewTab(e)}}},[i("span",{staticClass:"text-weight-medium"},[e.isDead?i("span",{staticClass:"isDeadIndicator"},[t._v("\n              †\n            ")]):t._e(),i("span",{class:{isDead:e.isDead&&!t.hideDeadCrossThrough}},[t._v("\n                "+t._s(t.stripTags(e.label))+"\n            ")])]),i("span",{staticClass:"inline-block q-ml-xs text-italic connectionNote"},[t._v("\n            "+t._s(t.retrieveNoteText(e._id))+"\n          ")])]),i("q-menu",{attrs:{"touch-position":"","context-menu":"","auto-close":"","separate-close-popup":"",dense:t.recursive,"content-style":"z-index: "+(999!==t.specialZIndex?t.specialZIndex+1:"")+" !important;"},on:{"before-show":function(e){return t.menuMode(!0)},"before-hide":function(e){return t.menuMode(!1)},mouseleave:t.menuLeave,mouseenter:t.menuEnter}},[i("q-list",{staticClass:"bg-gunmetal-light text-accent"},[[i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyName(t.fixGetCorrectDocument(e))}}},[i("q-item-section",[t._v("Copy name")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-text-recognition"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyTextColor(t.fixGetCorrectDocument(e))}}},[i("q-item-section",[t._v("Copy text color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-eyedropper"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyBackgroundColor(t.fixGetCorrectDocument(e))}}},[i("q-item-section",[t._v("Copy background color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-format-color-fill"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.openExistingInput(t.fixGetCorrectDocument(e))}}},[i("q-item-section",[t._v("Open document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-book-open-page-variant-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.editExistingInput(t.fixGetCorrectDocument(e))}}},[i("q-item-section",[t._v("Edit document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-pencil"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){return t.openDocumentPreviewPanel(e._id)}}},[i("q-item-section",[t._v("Preview document in split-view mode")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-file-search-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.addNewUnderParent(t.fixGetCorrectDocument(e))}}},[i("q-item-section",[t._v("Create new document with this document as parent")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-file-tree"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyTargetDocument(t.fixGetCorrectDocument(e))}}},[i("q-item-section",[t._v("Copy this document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-content-copy"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(i){return t.triggerExport(e)}}},[i("q-item-section",[t._v("Export document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-database-export-outline"}})],1)],1)]],2)],1)],1)],1)})),0):t._e(),t.editMode?i("div",{staticClass:"flex"},[i("q-select",{ref:"multiRelationshipField"+this.inputDataBluePrint.id,staticClass:"multiRelashionshipSelect",staticStyle:{"flex-grow":"1"},attrs:{"menu-anchor":"bottom middle","menu-self":"top middle",dark:"","popup-content-class":"menuResizer",dense:"",options:t.filterList,"use-input":"","option-disable":function(e){return Object(e)!==e||t.disabledIDList.includes(e._id)},outlined:!t.isDarkMode,filled:t.isDarkMode,"new-value-mode":"add-unique","use-chips":"",multiple:"","option-value":"_id","input-debounce":"500"},on:{"new-value":t.addNewRelationshipObject,filter:t.filterSelect,input:t.selectValue},scopedSlots:t._u([{key:"append",fn:function(){return[t.hideAdvSearchCheatsheetButton?t._e():i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-help-rhombus"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.SSET_setAdvSearchWindowVisible(e)}},scopedSlots:t._u([{key:"append",fn:function(){return[i("q-tooltip",{attrs:{delay:500}},[t._v("\n          Open search cheatsheet\n        ")])]},proxy:!0}],null,!1,3677000527)})]},proxy:!0},{key:"selected-item",fn:function(e){return[i("q-chip",{staticClass:"text-bold",attrs:{removable:"",dense:"",tabindex:e.tabindex,color:e.opt.isAutoGenerated?"teal-3":"accent","text-color":"dark"},on:{remove:function(i){return t.removeInput(e)}}},[e.opt.isAutoGenerated?i("q-tooltip",{attrs:{delay:500}},[t._v("\n            This document doesn't exist yet. It will be auto-generated on save.\n          ")]):t._e(),i("div",{staticClass:"relationShipChipOverlay",on:{mouseleave:t.setDocumentPreviewClose}}),i("div",{staticClass:"relationShipChipContent"},[e.opt.isDead?[t._v("\n            †\n          ")]:t._e(),t._v("\n          "+t._s(t.stripTags(e.opt.label))+"\n        ")],2),e.opt.isAutoGenerated?t._e():i("q-btn",{staticClass:"z-15 relationshipChipNewTab",staticStyle:{color:"#000 !important"},attrs:{round:"",dense:"",flat:"",size:"sm",icon:"mdi-open-in-new"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.openNewTab(e.opt)}}},[i("q-tooltip",{attrs:{delay:500}},[t._v("\n            Open in new tab without leaving this one\n          ")])],1),t.recursive||t.preventPreviewsDocuments||e.opt.isAutoGenerated?t._e():i("documentPreview",{attrs:{"custom-delay":1200,"document-id":e.opt._id,"external-close-trigger":t.documentPreviewClose}}),e.opt.isAutoGenerated?t._e():i("q-menu",{attrs:{"touch-position":"","context-menu":"","auto-close":"","separate-close-popup":"",dense:t.recursive},on:{"before-show":function(e){return t.menuMode(!0)},"before-hide":function(e){return t.menuMode(!1)},mouseleave:t.menuLeave,mouseenter:t.menuEnter}},[i("q-list",{staticClass:"bg-gunmetal-light text-accent"},[[i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyName(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Copy name")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-text-recognition"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyTextColor(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Copy text color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-eyedropper"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyBackgroundColor(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Copy background color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-format-color-fill"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.openExistingInput(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Open document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-book-open-page-variant-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.editExistingInput(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Edit document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-pencil"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){return t.openDocumentPreviewPanel(e.opt_id)}}},[i("q-item-section",[t._v("Preview document in split-view mode")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-file-search-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.addNewUnderParent(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Create new document with this document as parent")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-file-tree"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyTargetDocument(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Copy this document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-content-copy"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(i){return t.triggerExport(e.opt)}}},[i("q-item-section",[t._v("Export document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-database-export-outline"}})],1)],1)]],2)],1)],1)]}},{key:"option",fn:function(e){var n=e.itemProps,o=e.itemEvents,a=e.opt;return[i("q-item",t._g(t._b({key:a.id,class:{hasTextShadow:t.textShadow,isMinor:a.isMinor},style:"background-color: "+a.bgColor,attrs:{title:t.disabledIDList.includes(a._id)?"This option is unavailable for selection as it is already paired to another.":""},on:{mouseleave:t.setDocumentPreviewClose}},"q-item",n,!1),o),[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{style:"color: "+t.retrieveIconColor(a),attrs:{name:a.isCategory?"fas fa-folder-open":a.icon}})],1),i("q-item-section",[i("q-item-label",{style:"color: "+a.color},[a.isDead?i("span",{staticClass:"isDeadIndicator"},[t._v("\n              †\n            ")]):t._e(),i("span",{class:{isDead:a.isDead&&!t.hideDeadCrossThrough},domProps:{innerHTML:t._s(a.label)}})]),i("q-item-label",{staticClass:"text-cultured",attrs:{caption:""},domProps:{innerHTML:t._s(a.hierarchicalPath)}}),a.tags?i("q-item-label",{staticClass:"text-cultured",attrs:{caption:""}},t._l(a.tags,(function(e,n){return i("q-chip",{key:n,staticClass:"text-cultured noBounce",staticStyle:{opacity:"0.8"},attrs:{outline:"",size:"12px"},domProps:{innerHTML:t._s(""+e)}})})),1):t._e()],1),t.recursive||t.preventPreviewsDocuments?t._e():i("documentPreview",{attrs:{"document-id":a._id,"external-close-trigger":t.documentPreviewClose,"custom-anchor":"top start","custom-self":"center right","custom-delay":1500}}),i("q-menu",{attrs:{"touch-position":"","context-menu":"","auto-close":"","separate-close-popup":"",dense:t.recursive},on:{"before-show":function(e){return t.menuMode(!0)},"before-hide":function(e){return t.menuMode(!1)},mouseleave:t.menuLeave,mouseenter:t.menuEnter}},[i("q-list",{staticClass:"bg-gunmetal-light text-accent"},[[i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.copyName(a)}}},[i("q-item-section",[t._v("Copy name")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-text-recognition"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.copyTextColor(a)}}},[i("q-item-section",[t._v("Copy text color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-eyedropper"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.copyBackgroundColor(a)}}},[i("q-item-section",[t._v("Copy background color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-format-color-fill"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.openExistingInput(a)}}},[i("q-item-section",[t._v("Open document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-book-open-page-variant-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.editExistingInput(a)}}},[i("q-item-section",[t._v("Edit document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-pencil"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.openDocumentPreviewPanel(a._id)}}},[i("q-item-section",[t._v("Preview document in split-view mode")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-file-search-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.addNewUnderParent(a)}}},[i("q-item-section",[t._v("Create new document with this document as parent")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-file-tree"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.copyTargetDocument(a)}}},[i("q-item-section",[t._v("Copy this document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-content-copy"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.triggerExport(a)}}},[i("q-item-section",[t._v("Export document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-database-export-outline"}})],1)],1)]],2)],1)],1)]}}],null,!1,2982472049),model:{value:t.localInput,callback:function(e){t.localInput=e},expression:"localInput"}}),i("table",{staticClass:"q-mt-sm"},t._l(t.inputNotes,(function(e,n){return i("tr",{key:n},[i("td",[i("div",{staticClass:"flex"},[i("q-btn",{staticClass:"q-mr-xs self-center",attrs:{tabindex:"-1",round:"",flat:"",dense:"",disable:0===n,icon:"mdi-arrow-up-bold",size:"10px",color:0!==n?"primary":""},on:{click:function(e){return t.moveItem(n,"up")}}},[i("q-tooltip",{attrs:{delay:300,anchor:"center left",self:"center right"}},[t._v("\n            Move the item one place up\n            ")])],1),i("q-btn",{staticClass:"q-mr-xs self-center",attrs:{tabindex:"-1",round:"",flat:"",dense:"",disable:n===t.localInput.length-1,icon:"mdi-arrow-down-bold",size:"10px",color:n!==t.localInput.length-1?"primary":""},on:{click:function(e){return t.moveItem(n,"down")}}},[i("q-tooltip",{attrs:{delay:300,anchor:"center left",self:"center right"}},[t._v("\n            Move the item one place down\n            ")])],1),i("div",{staticClass:"grow-1"},[t._v("\n            "+t._s(t.stripTags(t.localInput[n].label))+"\n          ")])],1)]),i("td",[i("q-input",{attrs:{label:"Note",dense:"",autogrow:"",outlined:!t.isDarkMode,filled:t.isDarkMode},on:{keydown:function(e){return t.processInput()}},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"singleNote.value"}})],1)])})),0)],1):t._e(),i("div",{staticClass:"separatorWrapper"},[i("q-separator",{attrs:{color:"grey q-mt-md"}})],1)],1)},o=[],a=i("60a3"),s=i("91d2"),l=i("0382"),c=i("11ec"),r=i("1732"),u=i("0e86"),d=i("194f"),p=i("2a2b"),m=i("4bb5"),h=function(t,e,i,n){var o,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(s=(a<3?o(s):a>3?o(e,i,s):o(e,i))||s);return a>3&&s&&Object.defineProperty(e,i,s),s},v=function(t,e,i,n){function o(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,a){function s(t){try{c(n.next(t))}catch(e){a(e)}}function l(t){try{c(n["throw"](t))}catch(e){a(e)}}function c(t){t.done?i(t.value):o(t.value).then(s,l)}c((n=n.apply(t,e||[])).next())}))};const f=Object(m["a"])("dialogsModule");let b=class extends s["a"]{constructor(){super(...arguments),this.localInput=[],this.inputNotes=[],this.allTypeDocuments=[],this.filterList=[],this.disabledIDList=[],this.pullTimer=null,this.docToFind=null,this.documentPass=null,this.documentPreviewClose=""}get isOneWayRelationship(){return"singleToNoneRelationship"===this.inputDataBluePrint.type||"manyToNoneRelationship"===this.inputDataBluePrint.type}removeInput(t){return v(this,void 0,void 0,(function*(){t.removeAtIndex(t.index),yield this.$nextTick(),this.$refs[`multiRelationshipField${this.inputDataBluePrint.id}`].hidePopup()}))}reactToInputChanges(t){const e=Object(c["a"])(!0,{},t);this.localInput=(null===e||void 0===e?void 0:e.value)?e.value:[];const i=(null===e||void 0===e?void 0:e.addedValues)?e.addedValues:[];this.inputNotes=i.filter((t=>this.localInput.find((e=>t.pairedId===e._id)))),this.checkNotes(),this.reloadObjectListAndCheckIfValueExists()}reactToBlueprintChanges(){this.reloadObjectListAndCheckIfValueExists()}reactToIDChanges(){this.reloadObjectListAndCheckIfValueExists()}retrieveNoteText(t){const e=this.inputNotes.find((e=>e.pairedId===t));return e&&e.value.length>0?`(${e.value})`:""}refocusSelect(){return v(this,void 0,void 0,(function*(){yield this.$nextTick(),this.$refs[`multiRelationshipField${this.inputDataBluePrint.id}`].setOptionIndex(-1),this.agressiveRelationshipFilter&&this.$refs[`multiRelationshipField${this.inputDataBluePrint.id}`].moveOptionSelection(1,!0)}))}filterSelect(t,e){e(""!==t?()=>{const e=t.toLowerCase();this.filterList=Object(c["a"])(!0,[],this.allTypeDocuments),this.filterList=Object(l["a"])(e,this.filterList,this.SGET_allBlueprints,this.SGET_allDocuments.docs).filter((t=>t._id!==this.currentId)),this.$refs[`multiRelationshipField${this.inputDataBluePrint.id}`]&&this.filterList.length>0&&this.refocusSelect().catch((t=>console.log(t)))}:()=>{this.filterList=this.allTypeDocuments.filter((t=>!t.isMinor&&t._id!==this.currentId)),this.$refs[`multiRelationshipField${this.inputDataBluePrint.id}`]&&this.filterList.length>0&&this.refocusSelect().catch((t=>console.log(t)))})}reloadObjectListAndCheckIfValueExists(){var t,e,i;if((null===(t=this.inputDataBluePrint)||void 0===t?void 0:t.relationshipSettings)&&this.currentId.length>0){const t=this.SGET_allDocumentsByTypeWithoutCategories(this.inputDataBluePrint.relationshipSettings.connectedObjectType);t.docs.forEach((t=>{var e,i,n,o,a;const s=t,l=(null===(i=null===(e=this.inputDataBluePrint)||void 0===e?void 0:e.relationshipSettings)||void 0===i?void 0:i.connectedField)||"";let c=!1;if(l.length>0){const t=s.extraFields.find((t=>t.id===l)),e=this.inputDataBluePrint.type;void 0!==t&&null!==t&&void 0!==(null===t||void 0===t?void 0:t.value)&&null!==(null===t||void 0===t?void 0:t.value)&&"string"!==typeof(null===t||void 0===t?void 0:t.value)&&void 0!==(null===(n=null===t||void 0===t?void 0:t.value)||void 0===n?void 0:n.value)&&null!==(null===(o=null===t||void 0===t?void 0:t.value)||void 0===o?void 0:o.value)&&"string"!==typeof(null===(a=null===t||void 0===t?void 0:t.value)||void 0===a?void 0:a.value)&&"manyToSingleRelationship"===e&&(c=!0)}c&&(this.disabledIDList=[...new Set([...this.disabledIDList,t._id])])})),this.localInput=Array.isArray(this.localInput)?this.localInput:[];const n=[];let o=!1;for(const[a]of this.localInput.entries())if(this.localInput[a]._id&&(t.docs.find((t=>t._id===this.localInput[a]._id))||(null===(e=this.localInput[a])||void 0===e?void 0:e.isAutoGenerated)||n.push(this.localInput[a]._id),t.docs.find((t=>t._id===this.localInput[a]._id)))){const e=t.docs.find((t=>t._id===this.localInput[a]._id));e&&(this.localInput[a].label=e.label,this.localInput[a].isDead=null===(i=e.extraFields.find((t=>"deadSwitch"===t.id)))||void 0===i?void 0:i.value),this.localInput[a].isAutoGenerated&&(this.localInput[a].isAutoGenerated=!1,o=!0)}this.allTypeDocuments=t.docs,(n.length>0||o)&&(n.forEach((t=>{const e=this.localInput.findIndex((e=>e._id===t));e>-1&&this.localInput.splice(e,1)})),this.signalInput(!0))}}openNewTab(t){const e=this.SGET_openedDocument(t._id)||this.SGET_document(t._id),i={doc:e,treeAction:!1};this.SSET_addOpenedDocument(i)}selectValue(){this.$refs[`multiRelationshipField${this.inputDataBluePrint.id}`].updateInputValue(""),this.processInput()}moveItem(t,e){const i="up"===e?t-1:t+1,n=t;this.localInput.splice(i,0,this.localInput.splice(n,1)[0]),this.inputNotes.splice(i,0,this.inputNotes.splice(n,1)[0]),this.processInput()}processInput(){this.checkNotes(),this.inputNotes=this.inputNotes.filter((t=>this.localInput.find((e=>t.pairedId===e._id)))),clearTimeout(this.pullTimer),this.pullTimer=setTimeout((()=>{this.signalInput(!1)}),500)}signalInput(t){return this.checkNotes(),this.inputNotes=this.inputNotes.filter((t=>this.localInput.find((e=>t.pairedId===e._id)))),{value:this.localInput.map((t=>{var e,i;return{_id:t._id,id:t._id,type:t.type,url:t.url,label:(null===t||void 0===t?void 0:t.label)||"",isAutoGenerated:t.isAutoGenerated,pairedField:(null===(i=null===(e=this.inputDataBluePrint)||void 0===e?void 0:e.relationshipSettings)||void 0===i?void 0:i.connectedField)||""}})),addedValues:this.inputNotes,isSilent:t}}checkNotes(){this.localInput.forEach((t=>{this.inputNotes.find((e=>t._id===e.pairedId))||this.inputNotes.push({pairedId:t._id,value:""})}))}fixGetCorrectDocument(t){return this.docToFind=this.allTypeDocuments.find((e=>e._id===t._id)),this.docToFind}openExistingInput(t){t=Array.isArray(t)?t[0]:t,this.openExistingDocumentRoute(t)}editExistingInput(t){t=Array.isArray(t)?t[0]:t,this.openExistingDocumentRouteWithEdit(t)}addNewUnderParent(t){Object(u["a"])(t,this)}copyName(t){Object(d["b"])(t)}copyTextColor(t){Object(d["c"])(t)}copyBackgroundColor(t){Object(d["a"])(t)}copyTargetDocument(t){this.documentPass=Object(c["a"])(!0,{},t);const e=this.SGET_blueprint(this.documentPass.type),i=Object(p["a"])(this.documentPass,this.generateUID(),e),n={doc:i,treeAction:!1};this.SSET_addOpenedDocument(n),this.$router.push({path:i.url}).catch((t=>{const e=t.name;"NavigationDuplicated"!==e&&console.log(t)}))}addNewRelationshipObject(t){var e,i;this.$refs[`multiRelationshipField${this.inputDataBluePrint.id}`].updateInputValue("");const n=null===(i=null===(e=this.inputDataBluePrint)||void 0===e?void 0:e.relationshipSettings)||void 0===i?void 0:i.connectedObjectType,o=this.SGET_blueprint(n),a=Object(r["a"])(),s={bgColor:void 0,color:void 0,extraFields:[{id:"name",value:t},{id:"parentDoc",value:""},{id:"documentColor",value:""},{id:"documentBackgroundColor",value:""},{id:"finishedSwitch",value:""},{id:"minorSwitch",value:""},{id:"deadSwitch",value:""},{id:"categorySwitch",value:""},{id:"order",value:""},{id:"tags",value:[]},{id:"categoryDescription",value:""}],hierarchicalPath:o.namePlural,icon:o.icon,id:a,isCategory:"",isDead:void 0,isMinor:void 0,isAutoGenerated:!0,label:t,tags:[],type:n,url:`/project/display-content/${n}/${a}`,_id:a};this.localInput.push(s),this.processInput()}setDocumentPreviewClose(){this.documentPreviewClose=Object(r["a"])()}menuMode(t){return t}menuEnter(){return!0}menuLeave(){return!0}setNewParentId(t){return t}triggerExport(t){this.SSET_setDialogState(!1),this.$refs[`multiRelationshipField${this.inputDataBluePrint.id}`]&&this.$refs[`multiRelationshipField${this.inputDataBluePrint.id}`].hidePopup(),this.SSET_setExportDialogState([t._id])}};h([Object(a["c"])({default:999})],b.prototype,"specialZIndex",void 0),h([Object(a["c"])({default:!1})],b.prototype,"recursive",void 0),h([Object(a["c"])({default:!1})],b.prototype,"sideDocumentPreview",void 0),h([Object(a["c"])({default:()=>[]})],b.prototype,"inputDataValue",void 0),h([Object(a["c"])({default:""})],b.prototype,"currentId",void 0),h([Object(a["e"])("inputDataValue",{deep:!0,immediate:!0})],b.prototype,"reactToInputChanges",null),h([Object(a["e"])("inputDataBluePrint",{deep:!0,immediate:!0})],b.prototype,"reactToBlueprintChanges",null),h([Object(a["e"])("currentId")],b.prototype,"reactToIDChanges",null),h([Object(a["b"])()],b.prototype,"signalInput",null),h([Object(a["b"])()],b.prototype,"menuMode",null),h([Object(a["b"])()],b.prototype,"menuEnter",null),h([Object(a["b"])()],b.prototype,"menuLeave",null),h([Object(a["b"])()],b.prototype,"setNewParentId",null),h([f.Mutation("setDialogState")],b.prototype,"SSET_setDialogState",void 0),b=h([Object(a["a"])({components:{documentPreview:()=>Promise.resolve().then(i.bind(null,"aba7"))}})],b);var q=b,y=q,g=(i("1458"),i("e44c"),i("2877")),_=i("0016"),k=i("05c0"),x=i("1c1c"),C=i("9c40"),D=i("66e5"),I=i("4074"),w=i("4e73"),P=i("eb85"),T=i("ddd8"),S=i("b047"),O=i("0170"),E=i("27f9"),L=i("714f"),N=i("7f67"),j=i("eebe"),B=i.n(j),G=Object(g["a"])(y,n,o,!1,null,"c27ce828",null);e["default"]=G.exports;B()(G,"components",{QIcon:_["a"],QTooltip:k["a"],QList:x["a"],QBtn:C["a"],QItem:D["a"],QItemSection:I["a"],QMenu:w["a"],QSeparator:P["a"],QSelect:T["a"],QChip:S["a"],QItemLabel:O["a"],QInput:E["a"]}),B()(G,"directives",{Ripple:L["a"],ClosePopup:N["a"]})},"951e":function(t,e,i){},"9fa1":function(t,e,i){},bbb7:function(t,e,i){},e44c:function(t,e,i){"use strict";i("951e")},fa9a:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"documentLabelWrapper text-weight-bolder q-mb-sm q-mt-md"},[t.inputIcon?i("q-icon",{staticClass:"documentLabelIcon",attrs:{name:t.inputIcon,size:t.inputIcon.includes("fas")||t.inputIcon.includes("fab")?"15px":"20px"}}):t._e(),i("div",{staticClass:"documentLabelContent"},[t._v("\n      "+t._s(t.inputDataBluePrint.name)+"\n    ")]),t.toolTip&&!t.disableDocumentToolTips?i("q-icon",{staticClass:"documentLabelTooltip",attrs:{name:"mdi-help-circle",size:"16px"}},[i("q-tooltip",{attrs:{delay:500}},[i("span",{domProps:{innerHTML:t._s(t.toolTip)}})])],1):t._e(),t.isOneWayRelationship?i("q-icon",{staticClass:"documentLabelExtra",attrs:{name:"mdi-arrow-right-bold",size:"17px",color:"amber-14"}},[t.disableDocumentToolTips?t._e():i("q-tooltip",{attrs:{delay:500}},[t._v("\n          This is a one-way relationship. "),i("br"),t._v(" Editing this value "),i("span",{staticClass:"text-secondary"},[t._v("WILL NOT")]),t._v(" have any effect on the connected document/s.\n          "),i("br"),i("br"),t._v("\n          Left-clicking the linked document in non-edit mode will open it in new tab and focuses on it.\n          "),i("br"),t._v("\n          Middle-clicking the linked document in non-edit mode will open it in new tab and not focus on it.\n      ")])],1):t._e(),t.isOneWayRelationship?t._e():i("q-icon",{staticClass:"documentLabelExtra",attrs:{name:"mdi-arrow-left-right-bold",size:"17px",color:"teal-14"}},[t.disableDocumentToolTips?t._e():i("q-tooltip",{attrs:{delay:500}},[t._v("\n          This is a two-way relationship. "),i("br"),t._v(" Editing this value "),i("span",{staticClass:"text-secondary"},[t._v("WILL")]),t._v(" also affect the connected document/s.\n          "),i("br"),i("br"),t._v("\n          Left-clicking the linked document in non-edit mode will open it in new tab and focuses on it.\n          "),i("br"),t._v("\n          Middle-clicking the linked document in non-edit mode will open it in new tab and not focus on it.\n      ")])],1)],1),!t.editMode&&t.localInput?i("q-list",{staticClass:"connectionList",attrs:{dense:""}},[i("div",{staticClass:"relationsViewList"},[i("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"relationshipOpeningButton q-btn q-btn-item non-selectable no-outline q-btn--flat q-btn--round text-primary q-btn--actionable q-focusable q-hoverable q-btn--wrap q-btn--dense",on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:(e.stopPropagation(),e.preventDefault(),"button"in e&&0!==e.button?null:t.openNewTab(t.localInput))}}},[i("span",{staticClass:"q-focus-helper"}),i("i",{staticClass:"mdi mdi-open-in-new q-icon notranslate  text-primary",staticStyle:{"font-size":"20px"}}),i("q-tooltip",{attrs:{delay:500}},[t._v("\n          Open in new tab without leaving this one\n        ")])],1),t.recursive||t.sideDocumentPreview?i("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"relationshipChangeParent q-btn q-btn-item non-selectable no-outline q-btn--flat q-btn--round text-primary q-btn--actionable q-focusable q-hoverable q-btn--wrap q-btn--dense",on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:(e.stopPropagation(),e.preventDefault(),"button"in e&&0!==e.button?null:t.setNewParentId(t.localInput._id))}}},[i("span",{staticClass:"q-focus-helper"}),i("i",{staticClass:"mdi mdi-eye-outline q-icon notranslate  text-primary",staticStyle:{"font-size":"20px"}}),i("q-tooltip",{attrs:{delay:500}},[t._v("\n        Change preview to this document\n        ")])],1):t._e(),i("q-item",{staticClass:"text-primary",class:{hasSetParentButton:t.recursive},attrs:{clickable:""},on:{mouseleave:t.setDocumentPreviewClose}},[i("q-item-section",{on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:(e.stopPropagation(),e.preventDefault(),"button"in e&&0!==e.button?null:t.openExistingDocumentRoute(t.localInput))},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),"button"in e&&1!==e.button?null:t.openNewTab(t.localInput)}}},[i("span",{staticClass:"text-weight-medium"},[t.localInput.isDead?i("span",{staticClass:"isDeadIndicator"},[t._v("\n              †\n            ")]):t._e(),i("span",{class:{isDead:t.localInput.isDead&&!t.hideDeadCrossThrough}},[t._v("\n                "+t._s(t.stripTags(t.localInput.label))+"\n            ")])]),i("span",{staticClass:"inline-block q-ml-xs text-italic connectionNote"},[t._v("\n            "+t._s(t.retrieveNoteText())+"\n          ")])]),i("q-menu",{attrs:{"touch-position":"","context-menu":"","auto-close":"","separate-close-popup":"",dense:t.recursive,"content-style":"z-index: "+(999!==t.specialZIndex?t.specialZIndex+1:"")+" !important;"},on:{"before-show":function(e){return t.menuMode(!0)},"before-hide":function(e){return t.menuMode(!1)},mouseleave:t.menuLeave,mouseenter:t.menuEnter}},[i("q-list",{staticClass:"bg-gunmetal-light text-accent"},[[i("q-item",{attrs:{clickable:""},on:{click:function(e){t.copyName(t.fixGetCorrectDocument(t.localInput))}}},[i("q-item-section",[t._v("Copy name")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-text-recognition"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){t.copyTextColor(t.fixGetCorrectDocument(t.localInput))}}},[i("q-item-section",[t._v("Copy text color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-eyedropper"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){t.copyBackgroundColor(t.fixGetCorrectDocument(t.localInput))}}},[i("q-item-section",[t._v("Copy background color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-format-color-fill"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{attrs:{clickable:""},on:{click:function(e){t.openExistingInput(t.fixGetCorrectDocument(t.localInput))}}},[i("q-item-section",[t._v("Open document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-book-open-page-variant-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){t.editExistingInput(t.fixGetCorrectDocument(t.localInput))}}},[i("q-item-section",[t._v("Edit document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-pencil"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.openDocumentPreviewPanel(t.localInput._id)}}},[i("q-item-section",[t._v("Preview document in split-view mode")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-file-search-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){t.addNewUnderParent(t.fixGetCorrectDocument(t.localInput))}}},[i("q-item-section",[t._v("Create new document with this document as parent")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-file-tree"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){t.copyTargetDocument(t.fixGetCorrectDocument(t.localInput))}}},[i("q-item-section",[t._v("Copy this document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-content-copy"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.triggerExport(t.localInput)}}},[i("q-item-section",[t._v("Export document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-database-export-outline"}})],1)],1)]],2)],1),t.recursive||t.preventPreviewsDocuments?t._e():i("documentPreview",{attrs:{"document-id":t.localInput._id,"external-close-trigger":t.documentPreviewClose}})],1)],1)]):t._e(),t.editMode?i("div",{staticClass:"flex",on:{mouseleave:t.setDocumentPreviewClose}},[i("q-select",{ref:"singleRelationshipField"+t.inputDataBluePrint.id,staticClass:"singleRelashionshipSelect",staticStyle:{"flex-grow":"1"},attrs:{"menu-anchor":"bottom middle","menu-self":"top middle",dark:"","popup-content-class":"menuResizer",dense:"",options:t.filterList,"option-disable":function(e){return Object(e)!==e||t.disabledIDList.includes(e._id)},"use-input":"","new-value-mode":"add-unique",outlined:!t.isDarkMode,filled:t.isDarkMode,"input-debounce":"500","option-value":"_id"},on:{mouseleave:t.setDocumentPreviewClose,"new-value":t.addNewRelationshipObject,filter:t.filterSelect,input:t.selectValue},scopedSlots:t._u([{key:"append",fn:function(){return[t.hideAdvSearchCheatsheetButton?t._e():i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-help-rhombus"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.SSET_setAdvSearchWindowVisible(e)}},scopedSlots:t._u([{key:"append",fn:function(){return[i("q-tooltip",{attrs:{delay:500}},[t._v("\n            Open search cheatsheet\n          ")])]},proxy:!0}],null,!1,2877193295)})]},proxy:!0},{key:"selected-item",fn:function(e){return[e.opt.label&&e.opt.label.length>0?i("q-chip",{staticClass:"text-bold",attrs:{removable:"",dense:"",tabindex:e.tabindex,color:e.opt.isAutoGenerated?"teal-3":"accent","text-color":"dark"},on:{remove:function(i){return t.removeInput(e)}}},[e.opt.isAutoGenerated?i("q-tooltip",{attrs:{delay:500}},[t._v("\n              This document doesn't exist yet. It will be auto-generated on save.\n            ")]):t._e(),i("div",{staticClass:"relationShipChipOverlay",on:{mouseleave:t.setDocumentPreviewClose}}),i("div",{staticClass:"relationShipChipContent"},[e.opt.isDead?[t._v("\n              †\n            ")]:t._e(),t._v("\n            "+t._s(t.stripTags(e.opt.label))+"\n          ")],2),e.opt.isAutoGenerated?t._e():i("q-btn",{staticClass:"z-15 relationshipChipNewTab",staticStyle:{color:"#000 !important"},attrs:{round:"",dense:"",flat:"",size:"sm",icon:"mdi-open-in-new"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.openNewTab(e.opt)}}},[i("q-tooltip",{attrs:{delay:500}},[t._v("\n              Open in new tab without leaving this one\n            ")])],1),t.recursive||t.preventPreviewsDocuments||e.opt.isAutoGenerated?t._e():i("documentPreview",{attrs:{"document-id":e.opt._id,"external-close-trigger":t.documentPreviewClose,"custom-delay":1200}}),e.opt.isAutoGenerated?t._e():i("q-menu",{attrs:{"touch-position":"","context-menu":"","auto-close":"","separate-close-popup":"",dense:t.recursive},on:{"before-show":function(e){return t.menuMode(!0)},"before-hide":function(e){return t.menuMode(!1)},mouseleave:t.menuLeave,mouseenter:t.menuEnter}},[i("q-list",{staticClass:"bg-gunmetal-light text-accent"},[[i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyName(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Copy name")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-text-recognition"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyTextColor(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Copy text color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-eyedropper"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyBackgroundColor(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Copy background color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-format-color-fill"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.openExistingInput(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Open document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-book-open-page-variant-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.editExistingInput(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Edit document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-pencil"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){return t.openDocumentPreviewPanel(e.opt._id)}}},[i("q-item-section",[t._v("Preview document in split-view mode")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-file-search-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.addNewUnderParent(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Create new document with this document as parent")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-file-tree"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(i){t.copyTargetDocument(t.fixGetCorrectDocument(e.opt))}}},[i("q-item-section",[t._v("Copy this document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-content-copy"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(i){return t.triggerExport(e.opt)}}},[i("q-item-section",[t._v("Export document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-database-export-outline"}})],1)],1)]],2)],1)],1):t._e()]}},{key:"option",fn:function(e){var n=e.itemProps,o=e.itemEvents,a=e.opt;return[i("q-item",t._g(t._b({key:a.id,class:{hasTextShadow:t.textShadow,isMinor:a.isMinor},style:"background-color: "+a.bgColor,attrs:{title:t.disabledIDList.includes(a._id)?"This option is unavailable for selection as it is already paired to another.":""}},"q-item",n,!1),o),[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{style:"color: "+t.retrieveIconColor(a),attrs:{name:a.isCategory?"fas fa-folder-open":a.icon}})],1),i("q-item-section",[i("q-item-label",{style:"color: "+a.color},[a.isDead?i("span",{staticClass:"isDeadIndicator"},[t._v("\n                  †\n                ")]):t._e(),i("span",{class:{isDead:a.isDead&&!t.hideDeadCrossThrough},domProps:{innerHTML:t._s(a.label)}})]),i("q-item-label",{staticClass:"text-cultured",attrs:{caption:""},domProps:{innerHTML:t._s(a.hierarchicalPath)}}),a.tags?i("q-item-label",{staticClass:"text-cultured",attrs:{caption:""}},t._l(a.tags,(function(e,n){return i("q-chip",{key:n,staticClass:"text-cultured noBounce",staticStyle:{opacity:"0.8"},attrs:{outline:"",size:"12px"},domProps:{innerHTML:t._s(""+e)}})})),1):t._e()],1),t.recursive||t.preventPreviewsDocuments?t._e():i("documentPreview",{attrs:{"document-id":a._id,"external-close-trigger":t.documentPreviewClose,"custom-anchor":"top start","custom-self":"center right","custom-delay":1500}}),i("q-menu",{attrs:{"touch-position":"","context-menu":"","auto-close":"","separate-close-popup":"",dense:t.recursive},on:{"before-show":function(e){return t.menuMode(!0)},"before-hide":function(e){return t.menuMode(!1)},mouseleave:t.menuLeave,mouseenter:t.menuEnter}},[i("q-list",{staticClass:"bg-gunmetal-light text-accent"},[[i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.copyName(a)}}},[i("q-item-section",[t._v("Copy name")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-text-recognition"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.copyTextColor(a)}}},[i("q-item-section",[t._v("Copy text color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-eyedropper"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.copyBackgroundColor(a)}}},[i("q-item-section",[t._v("Copy background color")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-format-color-fill"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.openExistingInput(a)}}},[i("q-item-section",[t._v("Open document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-book-open-page-variant-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.editExistingInput(a)}}},[i("q-item-section",[t._v("Edit document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-pencil"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.openDocumentPreviewPanel(a._id)}}},[i("q-item-section",[t._v("Preview document in split-view mode")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-file-search-outline"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.addNewUnderParent(a)}}},[i("q-item-section",[t._v("Create new document with this document as parent")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-file-tree"}})],1)],1),i("q-item",{attrs:{clickable:""},on:{click:function(e){return t.copyTargetDocument(a)}}},[i("q-item-section",[t._v("Copy this document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"mdi-content-copy"}})],1)],1),i("q-separator",{attrs:{dark:""}}),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.triggerExport(a)}}},[i("q-item-section",[t._v("Export document")]),i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-database-export-outline"}})],1)],1)]],2)],1)],1)]}}],null,!1,2377898070),model:{value:t.localInput,callback:function(e){t.localInput=e},expression:"localInput"}}),t.localInput&&"parentDoc"!==t.inputFieldID?i("table",{staticClass:"q-mt-sm"},[i("tr",[i("td",[t._v("\n          "+t._s(t.stripTags(t.localInput.label))+"\n        ")]),i("td",[i("q-input",{attrs:{label:"Note",dense:"",autogrow:"",outlined:!t.isDarkMode,filled:t.isDarkMode},on:{keydown:t.processInput},model:{value:t.inputNote.value,callback:function(e){t.$set(t.inputNote,"value",e)},expression:"inputNote.value"}})],1)])]):t._e()],1):t._e(),i("div",{staticClass:"separatorWrapper"},[i("q-separator",{attrs:{color:"grey q-mt-md"}})],1)],1)},o=[],a=i("60a3"),s=i("91d2"),l=i("0382"),c=i("11ec"),r=i("1732"),u=i("0e86"),d=i("194f"),p=i("2a2b"),m=i("4bb5"),h=function(t,e,i,n){var o,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(s=(a<3?o(s):a>3?o(e,i,s):o(e,i))||s);return a>3&&s&&Object.defineProperty(e,i,s),s},v=function(t,e,i,n){function o(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,a){function s(t){try{c(n.next(t))}catch(e){a(e)}}function l(t){try{c(n["throw"](t))}catch(e){a(e)}}function c(t){t.done?i(t.value):o(t.value).then(s,l)}c((n=n.apply(t,e||[])).next())}))};const f=Object(m["a"])("dialogsModule");let b=class extends s["a"]{constructor(){super(...arguments),this.localInput="",this.inputNote={pairedId:"",value:""},this.allTypeDocuments=[],this.filterList=[],this.disabledIDList=[],this.pullTimer=null,this.docToFind=null,this.documentPass=null,this.documentPreviewClose=""}get inputFieldID(){var t;return null===(t=this.inputDataBluePrint)||void 0===t?void 0:t.id}get isOneWayRelationship(){return"singleToNoneRelationship"===this.inputDataBluePrint.type||"manyToNoneRelationship"===this.inputDataBluePrint.type}removeInput(t){return v(this,void 0,void 0,(function*(){t.removeAtIndex(t.index),yield this.$nextTick(),this.$refs[`singleRelationshipField${this.inputDataBluePrint.id}`].hidePopup()}))}reactToInputChanges(){var t,e;this.localInput=(null===(t=this.inputDataValue)||void 0===t?void 0:t.value)?this.inputDataValue.value:"",this.inputNote=(null===(e=this.inputDataValue)||void 0===e?void 0:e.addedValues)?this.inputDataValue.addedValues:this.inputNote,this.reloadObjectListAndCheckIfValueExists()}reactToBlueprintChanges(){this.reloadObjectListAndCheckIfValueExists()}reactToIDChanges(){this.reloadObjectListAndCheckIfValueExists()}retrieveNoteText(){const t=this.inputNote;return t&&t.value.length>0?`(${t.value})`:""}refocusSelect(){return v(this,void 0,void 0,(function*(){yield this.$nextTick(),this.$refs[`singleRelationshipField${this.inputDataBluePrint.id}`].setOptionIndex(-1),this.agressiveRelationshipFilter&&this.$refs[`singleRelationshipField${this.inputDataBluePrint.id}`].moveOptionSelection(1,!0)}))}filterSelect(t,e){e(""!==t?()=>{const e=t.toLowerCase();this.filterList=Object(c["a"])(!0,[],this.allTypeDocuments),this.filterList=Object(l["a"])(e,this.filterList,this.SGET_allBlueprints,this.SGET_allDocuments.docs).filter((t=>t._id!==this.currentId)),this.$refs[`singleRelationshipField${this.inputDataBluePrint.id}`]&&this.filterList.length>0&&this.refocusSelect().catch((t=>console.log(t)))}:()=>{this.filterList=this.allTypeDocuments.filter((t=>!t.isMinor&&t._id!==this.currentId)),this.$refs[`singleRelationshipField${this.inputDataBluePrint.id}`]&&this.filterList.length>0&&this.refocusSelect().catch((t=>console.log(t)))})}reloadObjectListAndCheckIfValueExists(){var t,e,i,n,o;if((null===(t=this.inputDataBluePrint)||void 0===t?void 0:t.relationshipSettings)&&this.currentId.length>0){const t="parentDoc"===this.inputDataBluePrint.id,a=t?this.SGET_allDocumentsByType(this.inputDataBluePrint.relationshipSettings.connectedObjectType):this.SGET_allDocumentsByTypeWithoutCategories(this.inputDataBluePrint.relationshipSettings.connectedObjectType);if(a.docs.forEach((t=>{var e,i,n;const o=t,s=(null===(i=null===(e=this.inputDataBluePrint)||void 0===e?void 0:e.relationshipSettings)||void 0===i?void 0:i.connectedField)||"";let l=!1;if(s.length>0){const t=o.extraFields.find((t=>t.id===s)),e=this.inputDataBluePrint.type;if(void 0!==t&&"string"!==typeof(null===t||void 0===t?void 0:t.value)&&null!==(null===t||void 0===t?void 0:t.value)&&null!==(null===(n=null===t||void 0===t?void 0:t.value)||void 0===n?void 0:n.value)&&"singleToSingleRelationship"===e){const e=a.docs.find((e=>{var i,n;return e._id===(null===(n=null===(i=null===t||void 0===t?void 0:t.value)||void 0===i?void 0:i.value)||void 0===n?void 0:n._id)}));e&&(l=!0)}}l&&(this.disabledIDList=[...new Set([...this.disabledIDList,t._id])])})),this.localInput._id&&(a.docs.find((t=>t._id===this.localInput._id))||(null===(e=this.localInput)||void 0===e?void 0:e.isAutoGenerated)||(this.localInput=""),a.docs.find((t=>t._id===this.localInput._id)))){const t=a.docs.find((t=>t._id===this.localInput._id));!t||this.localInput.label===t.label&&(null===(i=this.localInput)||void 0===i?void 0:i.isDead)===(null===(n=t.extraFields.find((t=>"deadSwitch"===t.id)))||void 0===n?void 0:n.value)||(this.localInput.label=t.label,this.localInput.isDead=null===(o=t.extraFields.find((t=>"deadSwitch"===t.id)))||void 0===o?void 0:o.value),this.localInput.isAutoGenerated&&(this.localInput.isAutoGenerated=!1)}this.allTypeDocuments=a.docs}}openNewTab(t){const e=this.SGET_openedDocument(t._id)||this.SGET_document(t._id),i={doc:e,treeAction:!1};this.SSET_addOpenedDocument(i)}processSelectInteraction(t){if("singleToSingleRelationship"===this.inputDataBluePrint.type)if(t)this.disabledIDList.push(t._id);else{const t=this.disabledIDList.findIndex((t=>t===this.inputDataValue.value._id));t>-1&&this.disabledIDList.splice(t,1)}this.processInput()}processInput(){this.inputNote=null!==this.localInput?this.inputNote:{pairedId:"",value:""},clearTimeout(this.pullTimer),this.pullTimer=setTimeout((()=>{this.signalInput()}),500)}signalInput(){var t,e,i;this.inputNote=null!==this.localInput?this.inputNote:{pairedId:"",value:""};const n=this.localInput&&this.localInput._id?{_id:this.localInput._id,id:this.localInput._id,type:this.localInput.type,url:this.localInput.url,label:(null===(t=this.localInput)||void 0===t?void 0:t.label)||"",isAutoGenerated:this.localInput.isAutoGenerated,pairedField:(null===(i=null===(e=this.inputDataBluePrint)||void 0===e?void 0:e.relationshipSettings)||void 0===i?void 0:i.connectedField)||""}:null;return{value:n,addedValues:this.inputNote}}fixGetCorrectDocument(t){return this.docToFind=this.allTypeDocuments.find((e=>e._id===t._id)),this.docToFind}openExistingInput(t){t=Array.isArray(t)?t[0]:t,this.openExistingDocumentRoute(t)}editExistingInput(t){t=Array.isArray(t)?t[0]:t,this.openExistingDocumentRouteWithEdit(t)}addNewUnderParent(t){Object(u["a"])(t,this)}copyName(t){Object(d["b"])(t)}copyTextColor(t){Object(d["c"])(t)}copyBackgroundColor(t){Object(d["a"])(t)}copyTargetDocument(t){this.documentPass=Object(c["a"])(!0,{},t);const e=this.SGET_blueprint(this.documentPass.type),i=Object(p["a"])(this.documentPass,this.generateUID(),e),n={doc:i,treeAction:!1};this.SSET_addOpenedDocument(n),this.$router.push({path:i.url}).catch((t=>{const e=t.name;"NavigationDuplicated"!==e&&console.log(t)}))}selectValue(){return v(this,void 0,void 0,(function*(){this.$refs[`singleRelationshipField${this.inputDataBluePrint.id}`].updateInputValue(""),yield this.$nextTick(),this.$refs[`singleRelationshipField${this.inputDataBluePrint.id}`].hidePopup(),this.processInput()}))}addNewRelationshipObject(t){var e,i;this.$refs[`singleRelationshipField${this.inputDataBluePrint.id}`].updateInputValue("");const n=null===(i=null===(e=this.inputDataBluePrint)||void 0===e?void 0:e.relationshipSettings)||void 0===i?void 0:i.connectedObjectType,o=this.SGET_blueprint(n),a=Object(r["a"])(),s={bgColor:void 0,color:void 0,extraFields:[{id:"name",value:t},{id:"parentDoc",value:""},{id:"documentColor",value:""},{id:"documentBackgroundColor",value:""},{id:"finishedSwitch",value:""},{id:"minorSwitch",value:""},{id:"deadSwitch",value:""},{id:"categorySwitch",value:""},{id:"order",value:""},{id:"tags",value:[]},{id:"categoryDescription",value:""}],hierarchicalPath:o.namePlural,icon:o.icon,id:a,isCategory:"",isDead:void 0,isMinor:void 0,isAutoGenerated:!0,label:t,tags:[],type:n,url:`/project/display-content/${n}/${a}`,_id:a};this.localInput=s,this.processInput()}setDocumentPreviewClose(){this.documentPreviewClose=Object(r["a"])()}menuMode(t){return t}menuEnter(){return!0}menuLeave(){return!0}setNewParentId(t){return t}triggerExport(t){this.SSET_setDialogState(!1),this.$refs[`singleRelationshipField${this.inputDataBluePrint.id}`]&&this.$refs[`singleRelationshipField${this.inputDataBluePrint.id}`].hidePopup(),this.SSET_setExportDialogState([t._id])}};h([Object(a["c"])({default:999})],b.prototype,"specialZIndex",void 0),h([Object(a["c"])({default:!1})],b.prototype,"recursive",void 0),h([Object(a["c"])({default:!1})],b.prototype,"sideDocumentPreview",void 0),h([Object(a["c"])({default:""})],b.prototype,"inputDataValue",void 0),h([Object(a["c"])({default:""})],b.prototype,"currentId",void 0),h([Object(a["e"])("inputDataValue",{deep:!0,immediate:!0})],b.prototype,"reactToInputChanges",null),h([Object(a["e"])("inputDataBluePrint",{deep:!0,immediate:!0})],b.prototype,"reactToBlueprintChanges",null),h([Object(a["e"])("currentId")],b.prototype,"reactToIDChanges",null),h([Object(a["b"])()],b.prototype,"signalInput",null),h([Object(a["b"])()],b.prototype,"menuMode",null),h([Object(a["b"])()],b.prototype,"menuEnter",null),h([Object(a["b"])()],b.prototype,"menuLeave",null),h([Object(a["b"])()],b.prototype,"setNewParentId",null),h([f.Mutation("setDialogState")],b.prototype,"SSET_setDialogState",void 0),b=h([Object(a["a"])({components:{documentPreview:()=>Promise.resolve().then(i.bind(null,"aba7"))}})],b);var q=b,y=q,g=(i("5141"),i("1b02"),i("2877")),_=i("0016"),k=i("05c0"),x=i("1c1c"),C=i("9c40"),D=i("66e5"),I=i("4074"),w=i("4e73"),P=i("eb85"),T=i("ddd8"),S=i("b047"),O=i("0170"),E=i("27f9"),L=i("714f"),N=i("7f67"),j=i("eebe"),B=i.n(j),G=Object(g["a"])(y,n,o,!1,null,"62edf818",null);e["default"]=G.exports;B()(G,"components",{QIcon:_["a"],QTooltip:k["a"],QList:x["a"],QBtn:C["a"],QItem:D["a"],QItemSection:I["a"],QMenu:w["a"],QSeparator:P["a"],QSelect:T["a"],QChip:S["a"],QItemLabel:O["a"],QInput:E["a"]}),B()(G,"directives",{Ripple:L["a"],ClosePopup:N["a"]})}}]);